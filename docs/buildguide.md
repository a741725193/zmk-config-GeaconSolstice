# ビルドガイド
## 部品確認
### 付属品
|名前|数|備考|
|:-|:-|:-|
|メインPCB（右）|x1| |
|メインPCB（左）|x1| |
|Seeed Studio XIAO nRF52840|x2|メインPCBに取付済み|
|PMW3610用PCB|x1|メインPCBに取付済み|
|L字ピンヘッダー|x1|メインPCBに取付済み|
|バッテリー用ケーブル|x2|※無線化する場合のみ|
|スイッチプレート（右）|x1| |
|スイッチプレート（日だっり）|x1| |
|ケース（右）|x1| |
|ケース（左）|x1| |
|リセットスイッチボタン|x2| |
|トラックボールケース|x1| |
|2mmセラミックボール|x3|トラックボールケースに圧入済み|
|OLED|x1||
|アナログスティック|x1||
|M3x5mmネジ|x10| |
|M2x8mmネジ|x2| |

### 別途用意するもの
|名前|数|備考|
|:-|:-|:-|
|34mmボール|x1| |
|Cherry MX/Choc V2キースイッチ|x63～64|JIS配列の場合x64|
|Cherry MXキーソケット|x63～64|JIS配列の場合x64|
|PCBマウントスタビライザー|x2～3|Cherry MXの場合のみ、JIS配列の場合x2|
|キーキャップ| | |
|3.7V電池（Lipoバッテリー502030想定）|x2|※無線化する場合のみ|
|両面テープ|x2| |

## スイッチソケットの実装
ソケットをはんだ付けする。  

## バッテリーケーブルの実装
メイン基板を裏向きにして、バッテリーのパッドに＋－を間違えないようにしてケーブルを差し込む。  
※上が+（VCC、赤）、下が-（GND、黒）  
表からはんだ付けする。  
はんだ付け後、裏面に伸びたリード線はショートしないようにカットする。  
バッテリーケーブルはテープや接着剤でPCBに固定することを推奨。  
![alt text](img/img02.jpg)

Tips：ぶらぶらしたケーブルがPCBのネジ穴とケースの固定用突起に挟まったままPCBを挿入したことで、ケーブルが切断されたことがあるので注意。   

## バッテリーの実装
ケース左上の空間にバッテリーを両面テープなどで固定する。  
バッテリーケーブルとバッテリーを接続する。（赤線と赤線、黒線と黒線がつながるようにすること。）  

## アナログスティックの実装
FFCコネクタの爪を持ち上げて開放状態にする。  
![alt text](img/img03.jpg)

FFCケーブルの向きに注意して、コネクタに差し込む。    
※写真の向きで正常です。
![alt text](img/img04.jpg)

FFCコネクタの爪を下げてロック状態にする。 
![alt text](img/img06.jpg)

FFCコネクタからFFCケーブルが抜けないように気を付けながら、コネクタをひねりながら表側に持ってくる。
![alt text](img/img05.jpg)

## スイッチプレートの組み立て
スイッチプレートとメインPCBを重ねてスイッチを挿していく。  

## ケースの組み立て
リセットスイッチをケース内側から差し込む。（吹き飛びやすいので注意）  
![alt text](img/img07.jpg)
メインPCBをケースに取り付ける。この時、バッテリーケーブルがPCBのネジ穴とケースの固定用突起などに挟まれないように注意すること。  
M3ネジでPCBをケースに固定する。  

## トラックボールケースの実装
トラックボールケースを差し込み、裏からM2ネジで固定する。  

## ファームウェアの書き込み
USBケーブルでPCに接続する。  
裏面のリセットスイッチを素早く2回クリックするとUSBドライブとしてマウントされる。  
UF2ファイルをドラッグ＆ドロップするとファームウェアの書き込みが始まる。  
完了すると自動的に切断され、使用できる状態となる。  

## レイヤー機能
|#|レイヤー|機能|
|:-|:--|:--|
|0|USレイヤー|デフォルトのレイヤー|
|1|疑似JISレイヤー|tabキー長押しで有効/無効を切り替える。|
|2|Functionレイヤー||
|3|マウスレイヤー|トラックボールが動いている間にのみ有効になる。|
|4|スクロールレイヤー|レイヤー2を有効にしている間にのみ有効になる。<br>トラックボールを動かすとスクロールする。 |
|5|BTレイヤー|数字1~5を押すことで接続プロファイルを切り替える。|

### JISレイヤー機能
・tabキー長押しでレイヤー1（疑似JISレイヤー）を有効/無効を切り替える。  
・レイヤー1は日本語配列として認識しているキーボードで英語配列の入力ができる。  
（例：日本語配列として認識しているPCで、レイヤー1を有効にしてSHIFT+2→＠を入力） 

### マウスレイヤー機能
以下のマウス入力が可能となる。
|キー|機能|
|:-|:-|
|「.」キー|左クリック|
|「/」キー|中央クリック|
|「右SHIFT」キー|右クリック|

### 接続プロファイル切り替え機能
・「＼」キーを押している間レイヤー5が有効になり、同時に数字1~5を押すことで接続プロファイルを切り替える。  
・レイヤー5で「`」キー→現在の接続プロファイルを消去する。tabキー→接続プロファイルを全て消去する。  

## その他
### 電源スイッチ

電源スイッチは左側でON、右側でOFFとなる。   